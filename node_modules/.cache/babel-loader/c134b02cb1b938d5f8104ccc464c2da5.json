{"ast":null,"code":"var _jsxFileName = \"/home/yehia/Documents/openclassroom projects/restaurant/src/components/RestaurantList.js\";\nimport React from 'react';\nimport Modal from 'react-awesome-modal';\nconst removedElements = [];\n\nclass RestaurantList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.showReviews = reviewIndex => {\n      fetch('https://cors-anywhere.herokuapp.com/' + 'https://maps.googleapis.com/maps/api/place/details/json?placeid=' + this.props.restaurants[reviewIndex].place_id + '&key=AIzaSyAUXi44xrkwClTtmRDXvbR9egoGX86XTpE').then(response => response.json()).then(data => {\n        const reviews = this.state.reviewsMap[this.props.restaurants[reviewIndex].place_id];\n\n        if (typeof reviews === 'undefined') {\n          this.getApiReviews(reviewIndex, data);\n        } else {\n          if (this.state.reviewsMap.length < data.result.reviews.length) {\n            this.getApiReviews(reviewIndex, data);\n          } else {\n            this.getNewReviews(reviewIndex);\n          }\n        }\n      });\n    };\n\n    this.getApiReviews = (reviewIndex, data) => {\n      var cloneObj = this.state.reviewsMap;\n      cloneObj[this.props.restaurants[reviewIndex].place_id] = data.result.reviews;\n      this.setState({\n        reviewsMap: cloneObj\n      }, () => {\n        const reviews = this.state.reviewsMap[this.props.restaurants[reviewIndex].place_id];\n        console.log(\"on show Reviews ya behhhhhhhhhhhhhhhh\", reviews);\n        document.getElementById(\"reviewList\").innerHTML = '<h4 className=\"reviews-List-title\">Previous reviews</h4>';\n\n        for (let index = 0; index < reviews.length; index++) {\n          let reviewbox = \"<div class='review-box'><div class='review-info'>Author: \" + reviews[index].author_name + \"<br/>Rate: \" + reviews[index].rating + \"</div><p class='review-comment'>\" + reviews[index].text + \"</p></div>\";\n          document.getElementById(\"reviewList\").innerHTML += reviewbox;\n        }\n      });\n    };\n\n    this.getNewReviews = reviewIndex => {\n      const reviews = this.state.reviewsMap[this.props.restaurants[reviewIndex].place_id];\n      console.log(\"on show Reviews ya behhhhhhhhhhhhhhhh\", reviews);\n      document.getElementById(\"reviewList\").innerHTML = '<h4 className=\"reviews-List-title\">Previous reviews</h4>';\n\n      for (let index = 0; index < reviews.length; index++) {\n        let reviewbox = \"<div class='review-box'><div class='review-info'>Author: \" + reviews[index].author_name + \"<br/>Rate: \" + reviews[index].rating + \"</div><p class='review-comment'>\" + reviews[index].text + \"</p></div>\";\n        document.getElementById(\"reviewList\").innerHTML += reviewbox;\n      }\n    };\n\n    this.addReview = index => {\n      console.log(\"index el hnaaa\", index);\n      document.getElementById(\"index\").innerHTML = index;\n      this.showReviews(index);\n      console.log(this.state.reviewsMap);\n      this.openModal();\n    };\n\n    this.removeListElement = () => {\n      for (let i = 0; i < removedElements.length; i++) {\n        document.getElementById(removedElements[i]).setAttribute(\"display\", \"none\");\n      }\n    };\n\n    this.makeReview = index => {\n      console.log(\"console review  ahoo  ooo debug\");\n      const review = document.getElementById(\"new_review\").value;\n      this.addToList(index, review);\n      this.addToPreviousReviews(index, review);\n    };\n\n    this.addToList = (index, review) => {\n      document.getElementById(this.props.restaurants[index].place_id).innerHTML = \"<div className='restaurant-review-box'><p className='restaurant-review-name'>\" + this.props.restaurants[index].name + \"</p><p className='restaurant-review-rating'>rate: \" + parseFloat((parseFloat(review) + this.props.restaurants[index].rating) / 2) + \"</p><p className='restaurant-review-raters'>no. Of Reviewers:  \" + parseInt(this.props.restaurants[index].user_ratings_total + 1) + \"</p></div>\";\n      this.getReviewDetails(this.props.restaurants[index].place_id);\n      this.props.restaurants[index].rating = parseFloat((parseFloat(review) + this.props.restaurants[index].rating) / 2);\n      this.props.restaurants[index].user_ratings_total = this.props.restaurants[index].user_ratings_total + 1;\n    };\n\n    this.addToPreviousReviews = (index, review) => {\n      const name = document.getElementById(\"feedback-name\").value;\n      const comment = document.getElementById(\"feedback_comment\").value;\n      var addedReview = {\n        rating: review,\n        text: comment,\n        author_name: name\n      };\n      let reviewMapClone = this.state.reviewsMap;\n      reviewMapClone[this.props.restaurants[index].place_id].push(addedReview);\n      this.setState({\n        reviewsMap: reviewMapClone\n      }, () => {\n        let reviewbox = \"<div class='review-box'><div class='review-info'>Author: \" + name + \"<br/>Rate: \" + review + \"</div><p class='review-comment'>\" + comment + \"</p></div>\";\n        document.getElementById(\"reviewList\").innerHTML += reviewbox;\n        const reviews = this.state.reviewsMap[this.props.restaurants[index].place_id];\n        console.log(\"b3d  show Reviews ya behhhhhhhhhhhhhhhh ama t make el review\", reviews);\n      });\n    };\n\n    this.filterReviews = items => {\n      const firstNo = parseFloat(document.getElementById(\"first-no\").value);\n      const secondNo = parseFloat(document.getElementById(\"second-no\").value);\n      let max, min;\n\n      if (firstNo > secondNo) {\n        max = firstNo;\n        min = secondNo;\n      } else if (firstNo < secondNo) {\n        max = secondNo;\n        min = firstNo;\n      }\n\n      for (let index = 0; index < items.length; index++) {\n        if (items[index].props.children === \"\") {\n          continue;\n        }\n\n        if (items[index].props.children.props.children[1].props.children[1] >= min && items[index].props.children.props.children[1].props.children[1] <= max) {\n          document.getElementById(items[index].props.id).style.display = \"block\";\n          let markerElement = document.getElementById(\"gmimap\" + index).parentElement;\n          console.log(markerElement);\n          markerElement.classList.remove(\"marker-hide\");\n        } else {\n          document.getElementById(items[index].props.id).style.display = \"none\";\n          let markerElement = document.getElementById(\"gmimap\" + index).parentElement;\n          console.log(markerElement);\n          markerElement.classList.add(\"marker-hide\");\n        }\n      }\n\n      console.log(items);\n    };\n\n    this.state = {\n      visible: false,\n      reviews: [],\n      reviewsMap: {}\n    };\n  }\n\n  getReviewDetails(id) {\n    fetch('https://cors-anywhere.herokuapp.com/' + 'https://maps.googleapis.com/maps/api/place/details/json?placeid=' + id + '&key=AIzaSyAUXi44xrkwClTtmRDXvbR9egoGX86XTpE').then(response => response.json()).then(data => {\n      console.log(data);\n    });\n  }\n\n  openModal() {\n    this.setState({\n      visible: true\n    });\n  }\n\n  closeModal() {\n    this.setState({\n      visible: false\n    });\n  }\n\n  render() {\n    const items = this.props.restaurants.map((obj, index) => React.createElement(\"li\", {\n      id: obj.place_id,\n      key: index,\n      onClick: () => this.addReview(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, typeof obj.rating !== \"undefined\" ? React.createElement(\"div\", {\n      className: \"restaurant-review-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"restaurant-review-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, obj.name), React.createElement(\"p\", {\n      className: \"restaurant-review-rating\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"rate:  \", obj.rating), React.createElement(\"p\", {\n      className: \"restaurant-review-raters\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"no. Of Reviewers:  \", obj.user_ratings_total)) : \"\"), this);\n    return React.createElement(\"div\", {\n      className: \"map-list pt-2 text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      className: \"ml-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Available Restaurant:\"), React.createElement(\"div\", {\n      className: \"filterBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"first-no\",\n      type: \"number\",\n      min: \"0\",\n      max: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"second-no\",\n      type: \"number\",\n      min: \"0\",\n      max: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: () => {\n        this.filterReviews(items);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"filter \")), React.createElement(\"ul\", {\n      id: \"restaurantsList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, items), React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      visible: this.state.visible,\n      width: \"1000\",\n      height: \"500\",\n      effect: \"fadeInUp\",\n      onClickAway: () => this.closeModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"p-5 place-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        display: \"none\"\n      },\n      id: \"index\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"review-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group  reviewer-email-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"feedback-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Your Name\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control reviewer-email\",\n      id: \"feedback-name\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Enter Your User Name\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group  reviewer-score-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"new_review\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Submit your feedback from 0 to 5\"), React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control reviewer-score\",\n      id: \"new_review\",\n      min: \"0\",\n      max: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group reviewer-comment-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"feedback_comment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Leave a comment\"), React.createElement(\"textarea\", {\n      className: \"form-control \",\n      id: \"feedback_comment\",\n      rows: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => {\n        this.closeModal();\n        console.log(document.getElementById(\"index\").innerHTML);\n        this.makeReview(document.getElementById(\"index\").innerHTML);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \" Submit Review\")), React.createElement(\"div\", {\n      className: \"reviews-List\",\n      id: \"reviewList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"reviews-List-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Previous reviews\"))))));\n  }\n\n}\n\nexport default RestaurantList;","map":{"version":3,"sources":["/home/yehia/Documents/openclassroom projects/restaurant/src/components/RestaurantList.js"],"names":["React","Modal","removedElements","RestaurantList","Component","constructor","props","showReviews","reviewIndex","fetch","restaurants","place_id","then","response","json","data","reviews","state","reviewsMap","getApiReviews","length","result","getNewReviews","cloneObj","setState","console","log","document","getElementById","innerHTML","index","reviewbox","author_name","rating","text","addReview","openModal","removeListElement","i","setAttribute","makeReview","review","value","addToList","addToPreviousReviews","name","parseFloat","parseInt","user_ratings_total","getReviewDetails","comment","addedReview","reviewMapClone","push","filterReviews","items","firstNo","secondNo","max","min","children","id","style","display","markerElement","parentElement","classList","remove","add","visible","closeModal","render","map","obj"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport Modal from 'react-awesome-modal';\n\nconst removedElements = []\nclass RestaurantList extends React.Component {\n  constructor(props) {\n       super(props);\n       this.state = {\n            visible : false,\n            reviews:[],\n            reviewsMap: {}\n        }\n\n   }\n  getReviewDetails(id){\n         fetch('https://cors-anywhere.herokuapp.com/' + 'https://maps.googleapis.com/maps/api/place/details/json?placeid='+id + '&key=AIzaSyAUXi44xrkwClTtmRDXvbR9egoGX86XTpE')\n        .then(response=>response.json()).then(data =>{\n          console.log(data);\n        })\n}\n\n   openModal() {\n           this.setState({\n               visible : true\n           });\n       };\n\n       closeModal() {\n           this.setState({\n               visible : false\n           });\n       };\n    showReviews = (reviewIndex) =>{\n\n      fetch('https://cors-anywhere.herokuapp.com/' + 'https://maps.googleapis.com/maps/api/place/details/json?placeid='+this.props.restaurants[reviewIndex].place_id + '&key=AIzaSyAUXi44xrkwClTtmRDXvbR9egoGX86XTpE')\n     .then(response=>response.json()).then(data =>{\n       const reviews =  this.state.reviewsMap[this.props.restaurants[reviewIndex].place_id]\n       if(typeof reviews === 'undefined' ){\n\n         this.getApiReviews(reviewIndex,data)\n       }else{\n         if(this.state.reviewsMap.length < data.result.reviews.length){\n                 this.getApiReviews(reviewIndex,data)\n          }\n          else{ this.getNewReviews(reviewIndex)  }\n      }\n\n       })\n   }\n\ngetApiReviews = (reviewIndex,data) =>{\n  var cloneObj = this.state.reviewsMap;\n  cloneObj[this.props.restaurants[reviewIndex].place_id] = data.result.reviews;\n   this.setState({\n    reviewsMap:  cloneObj\n  },()=>{\n    const reviews =  this.state.reviewsMap[this.props.restaurants[reviewIndex].place_id];\n    console.log(\"on show Reviews ya behhhhhhhhhhhhhhhh\",reviews)\n    document.getElementById(\"reviewList\").innerHTML = '<h4 className=\"reviews-List-title\">Previous reviews</h4>'\n    for(let index = 0; index < reviews.length;index++){\n        let reviewbox = \"<div class='review-box'><div class='review-info'>Author: \"+ reviews[index].author_name +\"<br/>Rate: \"+reviews[index].rating   +\"</div><p class='review-comment'>\"+ reviews[index].text +\"</p></div>\";\n       document.getElementById(\"reviewList\").innerHTML += reviewbox;\n    }\n  })\n};\ngetNewReviews = (reviewIndex)  =>{\n  const reviews =  this.state.reviewsMap[this.props.restaurants[reviewIndex].place_id];\n  console.log(\"on show Reviews ya behhhhhhhhhhhhhhhh\",reviews)\n  document.getElementById(\"reviewList\").innerHTML = '<h4 className=\"reviews-List-title\">Previous reviews</h4>'\n  for(let index = 0; index < reviews.length;index++){\n      let reviewbox = \"<div class='review-box'><div class='review-info'>Author: \"+ reviews[index].author_name +\"<br/>Rate: \"+reviews[index].rating   +\"</div><p class='review-comment'>\"+ reviews[index].text +\"</p></div>\";\n     document.getElementById(\"reviewList\").innerHTML += reviewbox;\n  }\n}\n\n   addReview = (index)=>{\n     console.log(\"index el hnaaa\",index)\n     document.getElementById(\"index\").innerHTML = index;\n        this.showReviews(index);\n        console.log(this.state.reviewsMap)\n     this.openModal();\n\n   };\n   removeListElement = ()=>{\n     for(let i = 0; i < removedElements.length; i++ ){\n       document.getElementById(removedElements[i]).setAttribute(\"display\", \"none\");\n     }\n   }\n   makeReview = (index)=>{\n     console.log(\"console review  ahoo  ooo debug\")\n     const review = document.getElementById(\"new_review\").value;\n      this.addToList(index,review);\n      this.addToPreviousReviews(index,review);\n   }\n  addToList = (index,review) =>{\n    document.getElementById(this.props.restaurants[index].place_id).innerHTML =  \"<div className='restaurant-review-box'><p className='restaurant-review-name'>\"+ this.props.restaurants[index].name  +\"</p><p className='restaurant-review-rating'>rate: \"+ parseFloat((parseFloat(review)+this.props.restaurants[index].rating)/2)+ \"</p><p className='restaurant-review-raters'>no. Of Reviewers:  \"+ parseInt(this.props.restaurants[index].user_ratings_total+1)+ \"</p></div>\";\n    this.getReviewDetails(this.props.restaurants[index].place_id)\n    this.props.restaurants[index].rating =  parseFloat((parseFloat(review)+this.props.restaurants[index].rating)/2);\n    this.props.restaurants[index].user_ratings_total = this.props.restaurants[index].user_ratings_total + 1;\n  }\n  addToPreviousReviews = (index,review) =>{\n    const name = document.getElementById(\"feedback-name\").value;\n    const comment = document.getElementById(\"feedback_comment\").value;\n    var addedReview = {\n      rating: review,\n      text: comment,\n      author_name: name\n       };\n     let reviewMapClone = this.state.reviewsMap;\n     reviewMapClone[this.props.restaurants[index].place_id].push(addedReview)\n    this.setState({\n      reviewsMap: reviewMapClone,\n    },()=>{\n      let reviewbox = \"<div class='review-box'><div class='review-info'>Author: \"+ name +\"<br/>Rate: \"+review  +\"</div><p class='review-comment'>\"+ comment +\"</p></div>\"\n      document.getElementById(\"reviewList\").innerHTML += reviewbox;\n      const reviews =  this.state.reviewsMap[this.props.restaurants[index].place_id];\n      console.log(\"b3d  show Reviews ya behhhhhhhhhhhhhhhh ama t make el review\",reviews)\n    })\n  };\n\n   filterReviews = (items) => {\n      const firstNo = parseFloat(document.getElementById(\"first-no\").value);\n      const secondNo = parseFloat(document.getElementById(\"second-no\").value);\n      let max,min;\n      if(firstNo > secondNo){\n        max = firstNo;\n        min = secondNo;\n      }\n      else if(firstNo < secondNo){\n        max = secondNo;\n        min = firstNo;\n      }\n      for(let index = 0; index < items.length; index++){\n        if(items[index].props.children === \"\"){\n          continue;\n        }\n        if(items[index].props.children.props.children[1].props.children[1] >= min && items[index].props.children.props.children[1].props.children[1] <= max){\n         document.getElementById(items[index].props.id).style.display = \"block\";\n         let markerElement = document.getElementById(\"gmimap\"+index).parentElement;\n         console.log(markerElement);\n          markerElement.classList.remove(\"marker-hide\");\n        }\n        else{\n          document.getElementById(items[index].props.id).style.display = \"none\";\n           let markerElement = document.getElementById(\"gmimap\"+index).parentElement;\n           console.log(markerElement);\n          markerElement.classList.add(\"marker-hide\");\n        }\n      }\n   console.log(items)\n   };\n\n  render() {\n\n      const items =  this.props.restaurants.map((obj,index) =>\n       <li id={obj.place_id}  key={index} onClick={()=> this.addReview(index)} >\n{typeof   obj.rating !== \"undefined\" ?\n        <div className=\"restaurant-review-box\">\n          <p className=\"restaurant-review-name\">{obj.name}</p>\n          <p className=\"restaurant-review-rating\">rate:  {obj.rating}</p>\n          <p className=\"restaurant-review-raters\">no. Of Reviewers:  {obj.user_ratings_total}</p>\n        </div>\n         : \"\"  }\n       </li>,this);\n\n\n      return (\n\n              <div className=\"map-list pt-2 text-left\">\n                <h6 className=\"ml-2\">Available Restaurant:</h6>\n                <div className=\"filterBox\">\n                  <input id=\"first-no\" type=\"number\" min=\"0\" max=\"5\" />\n                  <input id=\"second-no\" type=\"number\" min=\"0\" max=\"5\" />\n                  <button onClick= {() => {this.filterReviews(items)}}>filter </button>\n                </div>\n                <ul id=\"restaurantsList\">\n                    {items}\n                </ul>\n\n              {/* add review modal  */}\n              <section>\n                     <Modal visible={this.state.visible} width=\"1000\" height=\"500\" effect=\"fadeInUp\" onClickAway={() => this.closeModal()}>\n                            <div className=\"p-5 place-details\">\n                              <span style={{display:\"none\"}} id=\"index\"></span>\n                              <div className=\"review-form\">\n                                <div className=\"form-group  reviewer-email-box\">\n                                      <label htmlFor=\"feedback-name\">Your Name</label>\n                                      <input type=\"text\" className=\"form-control reviewer-email\" id=\"feedback-name\" aria-describedby=\"emailHelp\" placeholder=\"Enter Your User Name\" required />\n                                </div>\n\n                                <div className=\"form-group  reviewer-score-box\">\n                                      <label htmlFor=\"new_review\">Submit your feedback from 0 to 5</label>\n                                      <input type=\"number\" className=\"form-control reviewer-score\" id=\"new_review\" min=\"0\" max=\"5\" />\n                                </div>\n\n                                <div className=\"form-group reviewer-comment-box\">\n                                    <label htmlFor=\"feedback_comment\">Leave a comment</label>\n                                    <textarea className=\"form-control \" id=\"feedback_comment\" rows=\"3\"></textarea>\n                                  </div>\n                                  <button className=\"btn btn-primary\"  onClick={() => {\n                                      this.closeModal();\n                                      console.log(document.getElementById(\"index\").innerHTML);\n                                      this.makeReview(document.getElementById(\"index\").innerHTML);\n\n                                    }}> Submit Review</button>\n                                </div>\n                                 <div className=\"reviews-List\" id=\"reviewList\">\n                                      <h4 className=\"reviews-List-title\">Previous reviews</h4>\n                                 </div>\n                            </div>\n                      </Modal>\n                </section>\n              </div>\n\n\n      );\n  }\n}\n\nexport default RestaurantList;\n"]},"metadata":{},"sourceType":"module"}