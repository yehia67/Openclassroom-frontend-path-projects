{"ast":null,"code":"import _objectWithoutProperties from \"/home/yehia/Documents/openclassroom projects/restaurant/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/yehia/Documents/openclassroom projects/restaurant/src/components/MapDiv.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Map, GoogleApiWrapper, Marker, InfoWindow } from 'google-maps-react';\nimport Modal from 'react-awesome-modal';\nconst newRestaurants = [];\nconst newLi = [];\nconst google = window.google;\nconst mapStyles = {\n  height: '500px',\n  width: '100%'\n};\nvar iconBase = 'http://maps.google.com/mapfiles/marker_green.png';\n\nconst MarkersList = props => {\n  const locations = props.locations,\n        markerProps = _objectWithoutProperties(props, [\"locations\"]);\n\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, locations.map((location, i) => {\n    return React.createElement(Marker, Object.assign({\n      key: i\n    }, markerProps, {\n      position: {\n        lat: location.lat(),\n        lng: location.lng()\n      },\n      onClick: () => {\n        document.getElementById(\"new_restaurant_Name\").innerHTML = newRestaurants[i].name;\n        document.getElementById(\"new_restaurant_Rate\").innerHTML = \"Rate \" + newRestaurants[i].rating;\n        document.getElementById(\"new_restaurant_No_Rater\").innerHTML = \"no. of raters \" + newRestaurants[i].user_ratings_total;\n        document.getElementById(\"details_modal\").style.display = \"block\";\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23\n      },\n      __self: this\n    }));\n  }));\n};\n\nclass MapDiv extends React.Component {\n  constructor() {\n    super();\n\n    this.showRestaurantDetails = index => {\n      let retsuarantName;\n      let rate;\n      let noOfRaters;\n      retsuarantName = this.props.restaurants[index].name;\n      rate = this.props.restaurants[index].rating;\n      noOfRaters = this.props.restaurants[index].user_ratings_total;\n      document.getElementById(\"restaurant_Name\").innerHTML = retsuarantName;\n      document.getElementById(\"restaurant_Rate\").innerHTML = \"Rate \" + rate;\n      document.getElementById(\"restaurant_No_Rater\").innerHTML = \"no. of raters \" + noOfRaters;\n      this.openModal(0);\n    };\n\n    this.getNewRestaurantsByName = name => {\n      for (let index = 0; index < newRestaurants.length; index++) {\n        if (name === newRestaurants[index].name) {\n          return index;\n        }\n      }\n\n      return -1;\n    };\n\n    this.getLi = i => {\n      for (let index = 0; index < newLi.length; index++) {\n        let checkIndeces = newLi.split(\"//\");\n\n        if (i == checkIndeces[0]) {\n          return checkIndeces[1];\n        }\n      }\n\n      return -1;\n    };\n\n    this.addRestaurant = () => {\n      const restaurantName = document.getElementById(\"restaurantName\").value;\n      const reviews = document.getElementById(\"rate\").value;\n      const user_ratings_total = 1;\n      var ul = document.getElementById(\"restaurantsList\");\n      var li = document.createElement(\"li\");\n      const newRestaurant = {\n        name: restaurantName,\n        rating: reviews,\n        user_ratings_total: user_ratings_total,\n        comments: [{}]\n      };\n      const newRestaurantListElement = '<div className=\"restaurant-review-box\"><p className=\"restaurant-review-name\">' + restaurantName + '</p><p className=\"restaurant-review-rating\">rate:  ' + reviews + '</p><p className=\"restaurant-review-raters\">no. Of Reviewers: 1</p></div>';\n      newRestaurants.push(newRestaurant);\n      li.innerHTML = newRestaurantListElement;\n\n      li.onclick = () => {\n        let liText = li.innerHTML;\n        let startText = liText.indexOf('-name\">') + 7;\n        let endText = liText.indexOf('</p>');\n        let nameOfNewRestaurant = liText.substring(startText, endText);\n        let i = this.getNewRestaurantsByName(nameOfNewRestaurant);\n        console.log(\"index index\", i);\n        this.uploadComments(i);\n        newLi.push(i + \"//\" + li);\n        this.newOpenModal();\n      };\n\n      document.getElementById(\"add_new_review_link\").onclick = () => {\n        let liText = li.innerHTML;\n        let startText = liText.indexOf('-name\">') + 7;\n        let endText = liText.indexOf('</p>');\n        let nameOfNewRestaurant = liText.substring(startText, endText);\n        let i = this.getNewRestaurantsByName(nameOfNewRestaurant);\n        newRestaurants[i].user_ratings_total = newRestaurants[i].user_ratings_total + 1;\n        let review = document.getElementById(\"new_review_map\").value;\n        li.innerHTML = '<div className=\"restaurant-review-box\"><p className=\"restaurant-review-name\">' + newRestaurants[i].name + '</p><p className=\"restaurant-review-rating\">rate:  ' + parseFloat(parseFloat(review) + parseFloat(newRestaurants[i].rating)) / 2 + '</p><p className=\"restaurant-review-raters\">no. Of Reviewers: ' + parseInt(newRestaurants[i].user_ratings_total) + '</p></div>';\n        newRestaurants[i].rating = parseFloat(parseFloat(review) + parseFloat(newRestaurants[i].rating)) / 2;\n        let comment = {\n          author_name: document.getElementById(\"feedback-name-map\").value,\n          rating: document.getElementById(\"new_review_map\").value,\n          text: document.getElementById(\"feedback_comment-map\").value\n        };\n        newRestaurants[i].comments.push(comment);\n        this.newCloseModal();\n      };\n\n      ul.appendChild(li);\n      this.closeModal(1);\n    };\n\n    this.uploadComments = indexComment => {\n      console.log(\"yarab yarab yarab\", newRestaurants[indexComment].comments);\n\n      if (indexComment === -1 || newRestaurants[indexComment].comments.length === 1) {\n        document.getElementById(\"reviewListMap\").innerHTML = '<h4 className=\"reviews-List-title\">Previous reviews</h4>';\n      } else {\n        document.getElementById(\"reviewListMap\").innerHTML = '<h4 className=\"reviews-List-title\">Previous reviews</h4>';\n\n        for (let index = 1; index < newRestaurants[indexComment].comments.length; index++) {\n          let reviewbox = \"<div class='review-box'><div class='review-info'>Author: \" + newRestaurants[indexComment].comments[index].author_name + \"<br/>Rate: \" + newRestaurants[indexComment].comments[index].rating + \"</div><p class='review-comment'>\" + newRestaurants[indexComment].comments[index].text + \"</p></div>\";\n          document.getElementById(\"reviewListMap\").innerHTML += reviewbox;\n        }\n      }\n    };\n\n    this.handleMapClick = (ref, map, ev) => {\n      this.openModal(1);\n      const location = ev.latLng;\n      this.setState(prevState => ({\n        locations: [...prevState.locations, location]\n      }));\n      map.panTo(location);\n    };\n\n    this.displayMarkers = () => {\n      let markers;\n      console.log(this.props.filterMarker);\n\n      if (this.props.filterMarker === []) {\n        markers = this.props.restaurants;\n        console.log(this.props.restaurants);\n      } else {\n        markers = this.props.filterMarker;\n        console.log(\"el else\", this.props.restaurants);\n      }\n\n      return this.props.filterMarker.map((store, index) => {\n        const mark = React.createElement(Marker, {\n          key: index,\n          ref: store.place_id + \"1\",\n          position: {\n            lat: this.props.filterMarker[index].geometry.location.lat,\n            lng: this.props.filterMarker[index].geometry.location.lng\n          },\n          onClick: () => this.showRestaurantDetails(index),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        });\n        return mark;\n      });\n    };\n\n    this.state = {\n      zoom: 13,\n      newRestaurantName: \"\",\n      visible: false,\n      newVisible: false,\n      restaurantDetailsVisible: false,\n      locations: []\n    };\n    this.handleMapClick = this.handleMapClick.bind(this);\n  }\n\n  openModal(flag) {\n    if (flag === 1) {\n      this.setState({\n        visible: true\n      });\n    } else {\n      this.setState({\n        restaurantDetailsVisible: true\n      });\n    }\n\n    ReactDOM.findDOMNode(this.refs[\"ChIJjeXmqv5AWBQRkj5PU1JQQnU1\"]).style.display = 'none';\n  }\n\n  closeModal(flag) {\n    if (flag === 1) {\n      this.setState({\n        visible: false\n      });\n    } else {\n      this.setState({\n        restaurantDetailsVisible: false\n      });\n    }\n  }\n\n  newOpenModal() {\n    this.setState({\n      newVisible: true\n    });\n  }\n\n  newCloseModal() {\n    this.setState({\n      newVisible: false\n    });\n  }\n\n  render() {\n    const markers = this.displayMarkers();\n    console.log(markers);\n    return React.createElement(\"div\", {\n      className: \"map-div\",\n      id: \"map-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(Map, {\n      google: this.props.google,\n      zoom: 13,\n      style: mapStyles,\n      initialCenter: {\n        lat: this.props.Latitude,\n        lng: this.props.Longitude\n      },\n      onClick: this.handleMapClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(MarkersList, {\n      locations: this.state.locations,\n      icon: \"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }), React.createElement(Marker, {\n      icon: iconBase,\n      position: {\n        lat: this.props.Latitude,\n        lng: this.props.Longitude\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }), markers), React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      visible: this.state.visible,\n      width: \"700\",\n      height: \"300\",\n      effect: \"fadeInUp\",\n      onClickAway: () => this.closeModal(1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"p-5 add-restaurant\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"Add New Restaurant\"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      required: true,\n      className: \"form-control\",\n      id: \"restaurantName\",\n      placeholder: \"Enter Restaurant Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"float-left mt-3 mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, \"Your review:\"), React.createElement(\"input\", {\n      type: \"number\",\n      required: true,\n      className: \"form-control\",\n      id: \"rate\",\n      placeholder: \"Your review from 1 to 5\",\n      max: \"5\",\n      min: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"float-left\",\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: () => this.closeModal(1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Close\"), React.createElement(\"a\", {\n      className: \"float-right\",\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: () => this.addRestaurant(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"Add Restaurant\"))))), React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      visible: this.state.restaurantDetailsVisible,\n      width: \"400\",\n      height: \"150\",\n      effect: \"fadeInUp\",\n      onClickAway: () => this.closeModal(0),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"float-left\",\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: () => this.closeModal(0),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, \"Close\"), React.createElement(\"div\", {\n      className: \"p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      id: \"restaurant_Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      id: \"restaurant_Rate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      id: \"restaurant_No_Rater\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    })))), React.createElement(\"section\", {\n      id: \"details_modal\",\n      style: {\n        display: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      visible: true,\n      width: \"400\",\n      height: \"150\",\n      effect: \"fadeInUp\",\n      onClickAway: () => document.getElementById(\"details_modal\").style.display = \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"float-left\",\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: () => {\n        document.getElementById(\"details_modal\").style.display = \"none\";\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"Close\"), React.createElement(\"div\", {\n      className: \"p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      id: \"new_restaurant_Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      id: \"new_restaurant_Rate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      id: \"new_restaurant_No_Rater\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    })))), React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      visible: this.state.newVisible,\n      width: \"1000\",\n      height: \"500\",\n      effect: \"fadeInUp\",\n      onClickAway: () => this.newCloseModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"p-5 place-details\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        display: \"none\"\n      },\n      id: \"index\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"review-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group  reviewer-email-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"feedback-name-map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, \"Your Name\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control reviewer-email\",\n      id: \"feedback-name-map\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Enter Your User Name\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group  reviewer-score-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"new_review_map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, \"Submit your feedback from 0 to 5\"), React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control reviewer-score\",\n      id: \"new_review_map\",\n      min: \"0\",\n      max: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group reviewer-comment-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"feedback_comment-map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, \"Leave a comment\"), React.createElement(\"textarea\", {\n      className: \"form-control \",\n      id: \"feedback_comment-map\",\n      rows: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      id: \"add_new_review_link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, \" Submit Review\")), React.createElement(\"div\", {\n      className: \"reviews-List\",\n      id: \"reviewListMap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"reviews-List-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, \"Previous reviews\"))))));\n  }\n\n}\n\nexport default GoogleApiWrapper({\n  apiKey: 'AIzaSyAUXi44xrkwClTtmRDXvbR9egoGX86XTpE'\n})(MapDiv);","map":{"version":3,"sources":["/home/yehia/Documents/openclassroom projects/restaurant/src/components/MapDiv.js"],"names":["React","ReactDOM","Map","GoogleApiWrapper","Marker","InfoWindow","Modal","newRestaurants","newLi","google","window","mapStyles","height","width","iconBase","MarkersList","props","locations","markerProps","map","location","i","lat","lng","document","getElementById","innerHTML","name","rating","user_ratings_total","style","display","MapDiv","Component","constructor","showRestaurantDetails","index","retsuarantName","rate","noOfRaters","restaurants","openModal","getNewRestaurantsByName","length","getLi","checkIndeces","split","addRestaurant","restaurantName","value","reviews","ul","li","createElement","newRestaurant","comments","newRestaurantListElement","push","onclick","liText","startText","indexOf","endText","nameOfNewRestaurant","substring","console","log","uploadComments","newOpenModal","review","parseFloat","parseInt","comment","author_name","text","newCloseModal","appendChild","closeModal","indexComment","reviewbox","handleMapClick","ref","ev","latLng","setState","prevState","panTo","displayMarkers","markers","filterMarker","store","mark","place_id","geometry","state","zoom","newRestaurantName","visible","newVisible","restaurantDetailsVisible","bind","flag","findDOMNode","refs","render","Latitude","Longitude","cursor","apiKey"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Map, GoogleApiWrapper, Marker,InfoWindow } from 'google-maps-react';\nimport Modal from 'react-awesome-modal';\n\nconst newRestaurants = []\nconst newLi =[]\nconst google = window.google;\n\nconst mapStyles = {\n  height: '500px',\n  width:'100%'\n};\n\nvar iconBase = 'http://maps.google.com/mapfiles/marker_green.png';\n\nconst MarkersList = props => {\n  const { locations, ...markerProps } = props;\n  return (\n    <span>\n      {locations.map((location, i) => {\n        return (\n          <Marker\n            key={i}\n            {...markerProps}\n            position={{ lat: location.lat(), lng: location.lng() }}\n            onClick={() =>\n              {\n                document.getElementById(\"new_restaurant_Name\").innerHTML =  newRestaurants[i].name;\n                document.getElementById(\"new_restaurant_Rate\").innerHTML = \"Rate \"+ newRestaurants[i].rating;\n                document.getElementById(\"new_restaurant_No_Rater\").innerHTML = \"no. of raters \" +newRestaurants[i].user_ratings_total;\n                document.getElementById(\"details_modal\").style.display = \"block\";\n              }\n            }\n          />\n        );\n      })}\n    </span>\n  );\n};\nclass MapDiv extends React.Component {\n  constructor() {\n      super()\n      this.state = {\n        zoom: 13,\n        newRestaurantName:\"\",\n        visible : false,\n        newVisible: false,\n        restaurantDetailsVisible:false,\n        locations: []\n      }\n      this.handleMapClick = this.handleMapClick.bind(this);\n    }\n\n    openModal(flag) {\n           if(flag === 1)\n           {\n            this.setState({\n                visible : true\n            });\n\n          }\n          else{\n            this.setState({\n                restaurantDetailsVisible : true\n            });\n          }\n       \n          ReactDOM.findDOMNode(this.refs[\"ChIJjeXmqv5AWBQRkj5PU1JQQnU1\"]).style.display='none'\n\n\n\n        }\n       closeModal(flag) {\n          if(flag === 1){\n            this.setState({\n                visible : false\n            });\n          }\n          else{\n            this.setState({\n                restaurantDetailsVisible : false\n            });\n          }\n\n        }\n        newOpenModal() {\n                this.setState({\n                    newVisible : true\n                });\n            }\n\n            newCloseModal() {\n                this.setState({\n                    newVisible : false\n                });\n            }\n   showRestaurantDetails = (index) =>{\n      let retsuarantName;\n      let rate;\n      let noOfRaters;\n      retsuarantName =  this.props.restaurants[index].name;\n      rate = this.props.restaurants[index].rating;\n      noOfRaters = this.props.restaurants[index].user_ratings_total;\n      document.getElementById(\"restaurant_Name\").innerHTML =  retsuarantName;\n      document.getElementById(\"restaurant_Rate\").innerHTML = \"Rate \" +rate;\n      document.getElementById(\"restaurant_No_Rater\").innerHTML = \"no. of raters \" + noOfRaters;\n      this.openModal(0);\n  };\n  getNewRestaurantsByName = (name) =>{\n    for(let index = 0; index < newRestaurants.length ;index++){\n         if(name === newRestaurants[index].name ){\n           return index;\n         }\n    }\n    return -1;\n  }\n  getLi = (i) =>{\n    for(let index = 0; index < newLi.length;index++){\n      let checkIndeces = newLi.split(\"//\")\n      if(i == checkIndeces[0]){\n        return checkIndeces[1];\n      }\n    }\n    return -1;\n  };\n   addRestaurant = () =>{\n      const restaurantName = document.getElementById(\"restaurantName\").value;\n      const reviews = document.getElementById(\"rate\").value;\n      const user_ratings_total = 1;\n      var ul = document.getElementById(\"restaurantsList\");\n      var li = document.createElement(\"li\");\n      const newRestaurant ={\n        name:restaurantName,\n        rating:reviews,\n        user_ratings_total: user_ratings_total,\n        comments:[{}]\n      };\n\n      const newRestaurantListElement = '<div className=\"restaurant-review-box\"><p className=\"restaurant-review-name\">'+restaurantName+'</p><p className=\"restaurant-review-rating\">rate:  '+reviews+'</p><p className=\"restaurant-review-raters\">no. Of Reviewers: 1</p></div>';\n      newRestaurants.push(newRestaurant);\n      li.innerHTML =   newRestaurantListElement;\n      li.onclick = ()=>{\n        let liText = li.innerHTML;\n        let startText = liText.indexOf('-name\">') +7;\n        let endText = liText.indexOf('</p>')\n        let nameOfNewRestaurant = liText.substring(startText,endText);\n        let i = this.getNewRestaurantsByName(nameOfNewRestaurant)\n        console.log(\"index index\",i)\n        this.uploadComments(i)\n        newLi.push(i+\"//\"+li)\n        this.newOpenModal();\n      };\n\n      document.getElementById(\"add_new_review_link\").onclick = () =>{\n        let liText = li.innerHTML;\n        let startText = liText.indexOf('-name\">') +7;\n        let endText = liText.indexOf('</p>')\n        let nameOfNewRestaurant = liText.substring(startText,endText);\n        let i = this.getNewRestaurantsByName(nameOfNewRestaurant)\n\n        newRestaurants[i].user_ratings_total = newRestaurants[i].user_ratings_total + 1;\n        let review = document.getElementById(\"new_review_map\").value;\n\n        li.innerHTML =  '<div className=\"restaurant-review-box\"><p className=\"restaurant-review-name\">'+newRestaurants[i].name+'</p><p className=\"restaurant-review-rating\">rate:  '+(parseFloat(parseFloat(review)+parseFloat(newRestaurants[i].rating)))/2+'</p><p className=\"restaurant-review-raters\">no. Of Reviewers: '+parseInt(newRestaurants[i].user_ratings_total)+'</p></div>';\n        newRestaurants[i].rating = (parseFloat(parseFloat(review)+parseFloat(newRestaurants[i].rating)))/2;\n        let comment ={\n          author_name:document.getElementById(\"feedback-name-map\").value,\n          rating: document.getElementById(\"new_review_map\").value,\n          text: document.getElementById(\"feedback_comment-map\").value\n        }\n        newRestaurants[i].comments.push(comment)\n\n        this.newCloseModal();\n      };\n      ul.appendChild(li);\n      this.closeModal(1);\n   };\n\n   uploadComments = (indexComment) => {\n     console.log(\"yarab yarab yarab\",newRestaurants[indexComment].comments)\n     if(indexComment === -1 || newRestaurants[indexComment].comments.length  === 1 ){\n       document.getElementById(\"reviewListMap\").innerHTML = '<h4 className=\"reviews-List-title\">Previous reviews</h4>';\n     }\n     else{\n        document.getElementById(\"reviewListMap\").innerHTML = '<h4 className=\"reviews-List-title\">Previous reviews</h4>';\n       for(let index = 1; index < newRestaurants[indexComment].comments.length;index++){\n           let reviewbox = \"<div class='review-box'><div class='review-info'>Author: \"+ newRestaurants[indexComment].comments[index].author_name +\"<br/>Rate: \"+newRestaurants[indexComment].comments[index].rating   +\"</div><p class='review-comment'>\"+ newRestaurants[indexComment].comments[index].text +\"</p></div>\";\n           document.getElementById(\"reviewListMap\").innerHTML += reviewbox;\n       }\n }\n\n};\n\n    handleMapClick = (ref, map, ev) => {\n      this.openModal(1)\n      const location = ev.latLng;\n      this.setState(prevState => ({\n        locations: [...prevState.locations, location]\n      }));\n      map.panTo(location);\n    };\n\n    displayMarkers = () => {\n      let markers;\n      console.log(this.props.filterMarker)\n      if(this.props.filterMarker === []){\n        markers = this.props.restaurants;\n        console.log(this.props.restaurants)\n      }\n      else{\n        markers = this.props.filterMarker;\n        console.log(\"el else\",this.props.restaurants)\n\n      }\n      return this.props.filterMarker.map((store, index) => {\n      const mark = \n      \n      <Marker key={index}    ref= {store.place_id+\"1\"}   position={{\n          lat: this.props.filterMarker[index].geometry.location.lat,\n          lng: this.props.filterMarker[index].geometry.location.lng\n    }}\n      onClick={() =>\n        this.showRestaurantDetails(index)\n      }\n      />\n\n   return mark;\n     })\n }\n\n\n\n    render() {\n      const markers = this.displayMarkers()\n     console.log(markers)\n\n      return (\n\n      <div className=\"map-div\" id=\"map-div\">\n        <Map\n                google={this.props.google}\n                zoom={13}\n                style={mapStyles}\n                initialCenter={{ lat: this.props.Latitude, lng: this.props.Longitude}}\n                 onClick={this.handleMapClick}\n              >\n               <MarkersList locations={this.state.locations} icon=\"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png\" />\n              <Marker\n                icon= {iconBase}\n                 position={{ lat: this.props.Latitude, lng: this.props.Longitude}} />\n                 {markers}\n\n\n          </Map>\n            {/* new restaurant modal */}\n\n          <section>\n                <Modal visible={this.state.visible} width=\"700\" height=\"300\" effect=\"fadeInUp\" onClickAway={() => this.closeModal(1)}>\n                      <div className=\"p-5 add-restaurant\">\n                        <h3 className=\"text-center\" >Add New Restaurant</h3>\n                        <div className=\"form-group\">\n                            <input type=\"text\" required className=\"form-control\" id=\"restaurantName\" placeholder=\"Enter Restaurant Name\" />\n                            <label className=\"float-left mt-3 mb-0\">Your review:</label>\n                            <input type=\"number\" required className=\"form-control\" id=\"rate\" placeholder=\"Your review from 1 to 5\" max=\"5\" min=\"0\" />\n                        </div>\n                        <div className=\"form-group\">\n                            <a    className=\"float-left\" style={{cursor:\"pointer\"}} onClick={() => this.closeModal(1)}>Close</a>\n                            <a    className=\"float-right\" style={{cursor:\"pointer\"}}  onClick={() => this.addRestaurant()}>Add Restaurant</a>\n                        </div>\n                      </div>\n                  </Modal>\n          </section>\n              {/* marker modal for already existed restaurants */}\n\n          <section>\n              <Modal visible={this.state.restaurantDetailsVisible} width=\"400\" height=\"150\" effect=\"fadeInUp\" onClickAway={() => this.closeModal(0)}>\n                <a    className=\"float-left\" style={{cursor:\"pointer\"}} onClick={() => this.closeModal(0)}>Close</a>\n                    <div className=\"p-5\">\n                      <h5 id=\"restaurant_Name\" ></h5>\n                      <h5 id=\"restaurant_Rate\" ></h5>\n                      <h5 id=\"restaurant_No_Rater\" ></h5>\n                    </div>\n                </Modal>\n        </section>\n          {/* marker modal for created restaurants */}\n\n          <section id=\"details_modal\" style={{display: \"none\"}} >\n                <Modal  visible={true} width=\"400\" height=\"150\" effect=\"fadeInUp\" onClickAway={() =>document.getElementById(\"details_modal\").style.display = \"none\"}>\n                  <a    className=\"float-left\" style={{cursor:\"pointer\"}} onClick={() => {document.getElementById(\"details_modal\").style.display = \"none\"}}>Close</a>\n                      <div className=\"p-5\">\n                        <h5 id=\"new_restaurant_Name\" ></h5>\n                        <h5 id=\"new_restaurant_Rate\" ></h5>\n                        <h5 id=\"new_restaurant_No_Rater\" ></h5>\n                      </div>\n                  </Modal>\n          </section>\n          {/* add review  for new restaurant modal  */}\n          <section>\n                 <Modal visible={this.state.newVisible} width=\"1000\" height=\"500\" effect=\"fadeInUp\" onClickAway={() => this.newCloseModal()}>\n                   <div className=\"p-5 place-details\">\n                     <span style={{display:\"none\"}} id=\"index\"></span>\n                     <div className=\"review-form\">\n                       <div className=\"form-group  reviewer-email-box\">\n                             <label htmlFor=\"feedback-name-map\">Your Name</label>\n                             <input type=\"text\" className=\"form-control reviewer-email\" id=\"feedback-name-map\" aria-describedby=\"emailHelp\" placeholder=\"Enter Your User Name\" required />\n                       </div>\n\n                       <div className=\"form-group  reviewer-score-box\">\n                             <label htmlFor=\"new_review_map\">Submit your feedback from 0 to 5</label>\n                             <input type=\"number\" className=\"form-control reviewer-score\" id=\"new_review_map\" min=\"0\" max=\"5\" />\n                       </div>\n\n                       <div className=\"form-group reviewer-comment-box\">\n                           <label htmlFor=\"feedback_comment-map\">Leave a comment</label>\n                           <textarea className=\"form-control \" id=\"feedback_comment-map\" rows=\"3\"></textarea>\n                         </div>\n                         <button className=\"btn btn-primary\"  id=\"add_new_review_link\"> Submit Review</button>\n                       </div>\n                        <div className=\"reviews-List\" id=\"reviewListMap\">\n                             <h4 className=\"reviews-List-title\">Previous reviews</h4>\n                        </div>\n                   </div>\n                  </Modal>\n            </section>\n      </div>\n      );\n    }\n\n}\nexport default GoogleApiWrapper({\n  apiKey: 'AIzaSyAUXi44xrkwClTtmRDXvbR9egoGX86XTpE'\n})(MapDiv);\n"]},"metadata":{},"sourceType":"module"}