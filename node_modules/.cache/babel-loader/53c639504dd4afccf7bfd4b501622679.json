{"ast":null,"code":"var _jsxFileName = \"/home/yehia/Documents/openclassroom projects/restaurant/src/components/RestaurantList.js\";\nimport React from 'react';\nimport Modal from 'react-awesome-modal';\nconst removedElements = [];\n\nclass RestaurantList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addReview = index => {\n      this.openModal();\n      document.getElementById(\"index\").innerHTML = index;\n    };\n\n    this.removeListElement = () => {\n      for (let i = 0; i < removedElements.length; i++) {\n        document.getElementById(removedElements[i]).setAttribute(\"display\", \"none\");\n      }\n    };\n\n    this.makeReview = index => {\n      console.log(\"console review debug\");\n      const review = document.getElementById(\"new_review\").value;\n      document.getElementById(this.props.restaurants[index].place_id).innerHTML = \"<div className='restaurant-review-box'><p className='restaurant-review-name'>\" + this.props.restaurants[index].name + \"</p><p className='restaurant-review-rating'>rate: \" + parseFloat((parseFloat(review) + this.props.restaurants[index].rating) / 2) + \"</p><p className='restaurant-review-raters'>no. Of Reviewers:  \" + parseInt(this.props.restaurants[index].user_ratings_total + 1) + \"</p></div>\";\n      this.props.restaurants[index].rating = parseFloat((parseFloat(review) + this.props.restaurants[index].rating) / 2);\n      this.props.restaurants[index].user_ratings_total = this.props.restaurants[index].user_ratings_total + 1;\n    };\n\n    this.state = {\n      visible: false\n    };\n  }\n\n  getReviewDetails(id) {\n    const success = pos => {\n      var crd = pos.coords;\n      var reviewDetails;\n      this.setState({\n        Latitude: crd.latitude,\n        Longitude: crd.longitude\n      }, () => {\n        fetch('https://cors-anywhere.herokuapp.com/' + 'https://maps.googleapis.com/maps/api/place/details/json?placeid=' + id + '&key=AIzaSyAR14v1v6okXPc5QrZwvsmMbaHktnQ0M5I').then(response => response.json()).then(data => {\n          reviewDetails = data;\n        });\n      });\n    };\n\n    const error = err => {\n      console.warn(\"ERROR(\".concat(err.code, \"): \").concat(err.message));\n    };\n  }\n\n  openModal() {\n    this.setState({\n      visible: true\n    });\n  }\n\n  closeModal() {\n    this.setState({\n      visible: false\n    });\n  }\n\n  render() {\n    const items = this.props.restaurants.map((obj, index) => React.createElement(\"li\", {\n      id: obj.place_id,\n      key: index,\n      onClick: () => this.addReview(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, typeof obj.rating !== \"undefined\" ? React.createElement(\"div\", {\n      className: \"restaurant-review-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"restaurant-review-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, obj.name), React.createElement(\"p\", {\n      className: \"restaurant-review-rating\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"rate:  \", obj.rating), React.createElement(\"p\", {\n      className: \"restaurant-review-raters\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"no. Of Reviewers:  \", obj.user_ratings_total)) : \"\"), this);\n    return React.createElement(\"div\", {\n      className: \"map-list pt-2 text-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      className: \"ml-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Available Restaurant:\"), React.createElement(\"ul\", {\n      id: \"restaurantsList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, items), React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      visible: this.state.visible,\n      width: \"450\",\n      height: \"250\",\n      effect: \"fadeInUp\",\n      onClickAway: () => this.closeModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        display: \"none\"\n      },\n      id: \"index\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Enter your review:-\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"range\",\n      id: \"new_review\",\n      min: \"1\",\n      max: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      className: \"float-right\",\n      onClick: () => {\n        this.closeModal();\n        console.log(document.getElementById(\"index\").innerHTML);\n        this.makeReview(document.getElementById(\"index\").innerHTML);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Submit\")))));\n  }\n\n}\n\nexport default RestaurantList;","map":{"version":3,"sources":["/home/yehia/Documents/openclassroom projects/restaurant/src/components/RestaurantList.js"],"names":["React","Modal","removedElements","RestaurantList","Component","constructor","props","addReview","index","openModal","document","getElementById","innerHTML","removeListElement","i","length","setAttribute","makeReview","console","log","review","value","restaurants","place_id","name","parseFloat","rating","parseInt","user_ratings_total","state","visible","getReviewDetails","id","success","pos","crd","coords","reviewDetails","setState","Latitude","latitude","Longitude","longitude","fetch","then","response","json","data","error","err","warn","code","message","closeModal","render","items","map","obj","display"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport Modal from 'react-awesome-modal';\n\nconst removedElements = []\nclass RestaurantList extends React.Component {\n  constructor(props) {\n       super(props);\n       this.state = {\n            visible : false,\n        }\n\n   }\n  getReviewDetails(id){\n     const success = (pos) => {\n       var crd = pos.coords;\n       var reviewDetails;\n       this.setState({\n         Latitude: crd.latitude,\n         Longitude: crd.longitude\n       },()=> {\n         fetch('https://cors-anywhere.herokuapp.com/'+'https://maps.googleapis.com/maps/api/place/details/json?placeid='+id + '&key=AIzaSyAR14v1v6okXPc5QrZwvsmMbaHktnQ0M5I')\n        .then(response=>response.json()).then(data =>{\n\n          reviewDetails = data;\n\n        })\n\n       })\n\n     };\n\n     const error = (err) => {\n       console.warn(`ERROR(${err.code}): ${err.message}`);\n     };\n\n\n}\n\n   openModal() {\n           this.setState({\n               visible : true\n           });\n       }\n\n       closeModal() {\n           this.setState({\n               visible : false\n           });\n       }\n\n   addReview = (index)=>{\n     this.openModal();\n     document.getElementById(\"index\").innerHTML = index;\n\n   };\n   removeListElement = ()=>{\n     for(let i = 0; i < removedElements.length; i++ ){\n       document.getElementById(removedElements[i]).setAttribute(\"display\", \"none\");\n     }\n   }\n   makeReview = (index)=>{\n     console.log(\"console review debug\")\n     const review = document.getElementById(\"new_review\").value;\n     document.getElementById(this.props.restaurants[index].place_id).innerHTML =  \"<div className='restaurant-review-box'><p className='restaurant-review-name'>\"+ this.props.restaurants[index].name  +\"</p><p className='restaurant-review-rating'>rate: \"+ parseFloat((parseFloat(review)+this.props.restaurants[index].rating)/2)+ \"</p><p className='restaurant-review-raters'>no. Of Reviewers:  \"+ parseInt(this.props.restaurants[index].user_ratings_total+1)+ \"</p></div>\";\n\n     this.props.restaurants[index].rating =  parseFloat((parseFloat(review)+this.props.restaurants[index].rating)/2);\n     this.props.restaurants[index].user_ratings_total = this.props.restaurants[index].user_ratings_total + 1;\n   }\n\n  render() {\n\n      const items =  this.props.restaurants.map((obj,index) =>\n       <li id={obj.place_id}  key={index} onClick={()=> this.addReview(index)} >\n{typeof   obj.rating !== \"undefined\" ?\n        <div className=\"restaurant-review-box\">\n          <p className=\"restaurant-review-name\">{obj.name}</p>\n          <p className=\"restaurant-review-rating\">rate:  {obj.rating}</p>\n          <p className=\"restaurant-review-raters\">no. Of Reviewers:  {obj.user_ratings_total}</p>\n        </div>\n         : \"\"  }\n       </li>,this);\n\n\n      return (\n\n              <div className=\"map-list pt-2 text-left\">\n                <h6 className=\"ml-2\">Available Restaurant:</h6>\n                <ul id=\"restaurantsList\">\n                    {items}\n                </ul>\n\n              {/* add review modal  */}\n              <section>\n                     <Modal visible={this.state.visible} width=\"450\" height=\"250\" effect=\"fadeInUp\" onClickAway={() => this.closeModal()}>\n                            <div className=\"p-5\">\n                                <span style={{display:\"none\"}} id=\"index\"></span>\n                                <label>Enter your review:-</label><br />\n                                <input type=\"range\" id=\"new_review\" min=\"1\" max=\"5\"/>\n                                <br />\n                                <a  className=\"float-right\" onClick={() => {\n                                    this.closeModal();\n                                    console.log(document.getElementById(\"index\").innerHTML);\n                                    this.makeReview(document.getElementById(\"index\").innerHTML);\n                                  }}>Submit</a>\n                            </div>\n                      </Modal>\n                </section>\n              </div>\n\n\n      );\n  }\n}\n\nexport default RestaurantList;\n"]},"metadata":{},"sourceType":"module"}